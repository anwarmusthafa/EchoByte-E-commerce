{% extends 'admin_base.html' %}
{% load static%}
{% block content %}

<div class="container mt-5">
    <div class="row">
        <form action="{% url "sales_report" %}" method="post">
            {% csrf_token %}
        <div class="col">
            <h2>Sales Report</h2>
        </div>
    </div>
    <h4>Yearly </h4>
    <select id="year-select">
        <option value="">Select Year</option>
        <!-- Add options for years -->
        <!-- You can use JavaScript to generate these options dynamically -->
        <option value="2024">2024</option>
        <option value="2023">2023</option>
        <option value="2022">2022</option>
        <!-- Add more years as needed -->
      </select>
      <br>
      <br>
      <h4>Monthly</h4>

      <select id="month-select" name="month">
        <option value="0">Select Month</option>
        <option value="1">January</option>
        <option value="2">February</option>
        <option value="3">March</option>
        <option value="4">April</option>
        <option value="5">May</option>
        <option value="6">June</option>
        <option value="7">July</option>
        <option value="8">August</option>
        <option value="9">September</option>
        <option value="10">October</option>
        <option value="11">November</option>
        <option value="12">December</option>
      </select>
      <br><br>
      <h4>Custom Range</h4>
      
    <div class="row mt-3">
        <div class="col-md-6">
            <div class="form-group">
                
                    <label for="startDate">Start Date:</label>
                    <input type="date" name="start-date" id="startDate" class="form-control">
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label for="endDate">End Date:</label>
                <input type="date" name='end-date' id="endDate" class="form-control">
            </div>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col">
            <button id="generateReport" type="submit" class="btn btn-primary">Generate Report</button>
        </div>
    </form>
    </div>
</div>
{% if sales %}

<table class="table">
    <thead>
        <tr>
            <th scope="col">Order ID</th>
            <th scope="col">Customer</th>
            <th scope="col">Product</th>
            <th scope="col">Qty</th>
            <th scope="col">Total Amount</th>
            <th scope="col">Discount</th>
            <th scope="col">Net Amount</th>
            <th scope="col">Date</th>
        </tr>
    </thead>
    <tbody>
        {% for sale in sales  %}
        <tr>
            <td>{{sale.id}}</td>
            <td>{{sale.order.owner.customer.name}}</td>
            <td>{{sale.product.product.brand}} {{sale.product.product.title}} <br>({{sale.product.variant_name}})</td>
            <td>{{sale.quantity}}</td>
            <td>{{sale.total_amount}}</td>
            <td>{{ sale.discount_amount }}</td>
            <td>{{sale.amount}}</td>
            <td>{{sale.created_at}}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div class="container">
    <div class="row mt-3">
        <div class="col">
           <a href="{% url "download_pdf" %}"> <button  id="downloadPDF" class="btn btn-success">Download PDF</button></a>
            <a href="{% url "download_excel" %}"><button id="downloadExcel" class="btn btn-success">Download Excel</button></a>
        </div>
    </div>
</div>
{% endif %}
{% if message %}
<h1 class="text-center text-danger">{{message}}</h1>
{% endif %}

  
{% endblock content %}

{% block thispagelinks %}


{% endblock  %}